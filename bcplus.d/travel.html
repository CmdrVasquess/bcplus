<!doctype html>
<html lang="de">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="s/css/bcp.css">
<!-- >>> local-style >>> -->
	<style>
main span.btn { cursor: pointer; }
main span.addest {
	background-color: var(--tblOdd);
	padding-left: .5em;
	padding-right: .5em;
	padding-top: .2em;
	padding-bottom: .2em;
	border-radius: 3px;
	cursor: pointer;
}
main td {
	padding-left: .3em;
	padding-right: .3em;
}
main td.avgttl {
  text-align: right;
  font-weight: bold;
}
main td.avgttl::after {
  content: ":"
}
main td.avgdta1 {
  text-align: center;
}
main td.avgdta2 {
  text-align: right;
}
main tr:nth-of-type(odd) {
	background-color: var(--tblOdd);
}
main tr:nth-of-type(even) {
	background-color: var(--tblEvn);
}
#tagf {
  display: inline;
  border: none;
  margin: 0;
}
#dsthdr{ cursor: pointer; }
#dsthdr::before {	content: "▾ "; }
#dsthdr.hide::before { content: "▸ "; }
#addest { margin-bottom: .5em; }
#addest.hide { display: none; }
#destnts {
	width: 40em;
	height: 5em;
	color: var(--colFgr);
	background-color: var(--colBkg);
	border: 1px solid;
	border-color: var(--colFgr);
	padding: .2em;
	vertical-align: top;
}
	</style>
<!-- <<< local-style <<< -->
  </head>
  <body>
  <main>
</select>
<!-- >>> topic >>> -->
	<h1 id="dsthdr" class="hide" onclick="tglDstForm()">Destinations</h1>
	<form id="addest" class="hide">
		<label for="destnm"><span class="addest" onclick="addDst()">Add Destination</span>: <input type="text" id="destnm" size="20"></label>
		<label for="destcoo">Coordinates: <input type="text" id="destcoo" size="24"></label>
		<label for="desttags">Tags: <input type="text" id="desttags" size="30"></label>
		<br><label for="destnts">Notes:<textarea id="destnts"></textarea></label>
	</form>
Plan with <select name="shipopt" onchange="selShip(value)">
<!-- >>> shipopts <<< \-->
<!-- >>> shipopt >>> -->
<option value="`id`">`ship` – `jump` Ly</option>

<!-- <<< shipopt <<< \-->
<!-- >>> shipopt-sel >>> -->
<option value="`id`" selected="selected">`ship` – `jump` Ly</option>

<!-- <<< shipopt-sel <<< \-->
</select>: max=`lypj-max` / avg=`lypj-avg` Ly/Jump
<!--	Filter <fieldset id="tagf">
	  <input type="radio" id="tfall" name="tagf" value="all">
	  <label for="tfall">all</label>
	  <input type="radio" id="tfany" name="tagf" value="any" checked="checked">
	  <label for="tfany">any</label>
	</fieldset> tags: <input type="text" list="tags" id="tagf" value="" name="tagf" placeholder="Type tag">
<datalist id="tags">
  <option value="Home">
  <option value="Formidine Rift">
</datalist -->	
	<table id="dests" style="width:100%">
		<thead><tr>
			<th colspan="2">Destination</th>
			<th>Distance</th>
			<th>ETD</th>
			<th>EJD</th>
			<th>Coordinates</th>
			<th>Note</th>
			<th>Tags</th>
		</tr></thead>
		<tbody>
<!-- >>> destinations <<< \-->
<!-- >>> dest >>> -->
		<tr id="dst`dst-id`">
			<td><img class="inlico btn" src="s/img/`home-flag`Home.png"
			         title="Toggle Home System"
			         onclick="tglHomeId(`dst-id`)">
			    `name`</td>
			<td class="center"> 
			   <span class="btn" onclick="editDst(this)">✍</span>
			   &nbsp;
				<img class="inlico btn" src="s/img/Trash.png"
			        title="Double-click to Delete"
			        ondblclick="delDst(`dst-id`)">
			</td>
			<td class="right">`dist` Ly</td>
			<td class="right">`etd`</td>
			<td class="center">`ejd`</td>
			<td class="center">`coox` / `cooy` / `cooz`</td>
			<td>`note`</td>
			<td>`tags`</td>
		</tr>

<!-- <<< dest <<< \-->
		</tbody>
	</table>
	<h1>Jump Statistics</h1>
	<table id="jhist" style="width:100%">
		<thead><tr>
			<th>Last…</th>
			<th colspan="2">Jump</th>
<!-- >>> avg-heads <<< \-->
<!-- >>> avg-heading >>> -->
			<th colspan="2">`count` Jumps</th>

<!-- <<< avg-heading <<< \-->
		</tr></thead>
		<tbody>
<!-- >>> avg-rows <<< \-->
<!-- >>> avg-row >>> -->
		<tr>
			<td class="avgttl">`title`</td>
<!-- >>> values <<< \-->
<!-- >>> value1 >>> -->
			<td class="avgdta1" colspan="2">`data`</td>

<!-- <<< value1 <<< \-->
<!-- >>> value2 >>> -->
			<td class="avgdta2">∑: `sum`</td><td class="avgdta">Ø: `avg`</td>

<!-- <<< value2 <<< \-->
		</tr>

<!-- <<< avg-row <<< \-->
		<tbody>
	</table>
   <script type="text/javascript">
function selShip(shId) {
	var rq = new Object();
	rq.topic = "travel";
	rq.op = "planShip";
	rq.shipId = parseInt(shId);
	var msg = JSON.stringify(rq);
	wsock.send(msg);
}
function tglHomeId(hId) {
	var rq = new Object();
	rq.topic = "travel";
	rq.op = "tglHomeId";
	rq.id = hId;
	var msg = JSON.stringify(rq);
	wsock.send(msg);	
}
function tglDstForm() {
	var hdr = document.getElementById("dsthdr");
	var frm = document.getElementById("addest");
	hdr.classList.toggle("hide");
	frm.classList.toggle("hide");
}
function editDst(btn) {
	var edNm = document.getElementById("destnm");
	var edCoos = document.getElementById("destcoo");
	var edNts = document.getElementById("destnts");
	var edTags = document.getElementById("desttags");
	var dst = btn.parentElement.parentElement.getElementsByTagName("td");
	showStatus(dst[0].innerText);
	edNm.value = dst[0].innerText;
	edCoos.value = dst[5].innerText;
	edNts.value = dst[6].innerText;
	edTags.value = dst[7].innerText;
}
function addDst() {
	var rq = new Object();
	rq.topic = "travel";
	rq.op = "addDst";
	rq.nm = document.getElementById("destnm").value;
	rq.coo = document.getElementById("destcoo").value;
	rq.note = document.getElementById("destnts").value;
	rq.tags = document.getElementById("desttags").value;
	var msg = JSON.stringify(rq);
	wsock.send(msg);		
}
function delDst(dId) {
	var rq = new Object();
	rq.topic = "travel";
	rq.op = "delDst";
	rq.id = dId;
	var msg = JSON.stringify(rq);
	wsock.send(msg);	
}
	</script>
<!-- <<< topic <<< -->
  </main>
  </body>
</html>
